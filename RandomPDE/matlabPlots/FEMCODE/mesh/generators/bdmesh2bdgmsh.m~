function bdgmsh = bdmesh2bdgmsh( bdmesh )
%BDMESH2BDGMSH Summary of this function goes here
%   Detailed explanation goes here

% assumptions: 
% 1. not periodic
% 2. 3D

d = size(bdmesh.node,2);
N = size(bdmesh.node,1);
if d ~= 3, error('unsupported dimension'); end

bdgmsh = struct;
bdgmsh.node = bdmesh.node;


[edge, elem2edge] = auxstructure(bdmesh, 'edge','elem2edge');
NE = size(edge,1);
bdgmsh.line = edge;

NT = size(bdmesh.elem,1);
for i=1:NT
  bdgmsh.lineloop{i} = [...
    double(elem2edge(i,1)) * (-1)^(bdmesh.elem(i,2) > bdmesh.elem(i,1)), ...
    double(elem2edge(i,2)) * (-1)^(bdmesh.elem(i,1) > bdmesh.elem(i,3)), ...
    double(elem2edge(i,3)) * (-1)^(bdmesh.elem(i,3) > bdmesh.elem(i,2)) ...
    ];
end

for i=1:3
  nnum = find(bdmesh.node(:,i) == 1);
  NN = numel(nnum);
  a = zeros(NE,1);
  for j=1:NN
    a = a + sum(edge == nnum(j), 2);
  end
  ned = find(a==2);
  NC = numel(ned);
  used = false(NC,1);
  bdgmsh.lineloop{NT+i} = ned(1); used(1) = true;
  for j=2:NC
    for k=1:NC
      if used(k), c
    end
  end
  
end

for i= 1:NT
  bdgmsh.planesurface{i} = i;
end
bdgmsh.surfaceloop{1} = 1:NT;
bdgmsh.volume{1} = 1;




end

